# Interacting with the BM280 Sensor #

This document outlines how to set up the BME688 sensor to communicate with the Raspberry Pi.


## Set up ##


### Connect to Raspberry Pi ###

Connect the following BME688 pins to the corresponding Raspberry Pi pins:

| **BME688** | **Raspberry Pi** | **Pin Number** |
| ---------- | ---------------- | -------------- |
| 2-5V       | 3v3 Power        | 1              |
| SDA        | GPIO 2           | 3              |
| SCL        | GPIO 3           | 5              |
| GND        | Ground           | 9              |

See the diagram of the Raspberry Pi pins [here](https://www.raspberrypi.com/documentation/computers/raspberry-pi.html#gpio).


### Enable I2C  ###

Make sure I2C communication is enabled on the Raspberry Pi. Do this by entering the configoration.

```
sudo raspi-config
```

Navigate to `Interface Options`, then `I2C` and respond `Yes` to whether you want this enabled.

Exit the config setup and reboot the Raspberry Pi


### Get I2C Sensor Address ###

Use the following command to get the sensors I2C address:

```
i2cdetect -y 1
```

This should return an output that looks like the following:

```
     0  1  2  3  4  5  6  7  8  9  a  b  c  d  e  f
00:                         -- -- -- -- -- -- -- -- 
10: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
20: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
30: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
40: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
50: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
60: -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- 
70: -- -- -- -- -- -- 76 -- 
```

Make an note of the number that appears in the table. In this case it is **76**.


### Installation  ###

We need to install the Python package by Pimoroni outlined [here](https://github.com/pimoroni/bme680-python/tree/main):

```
git clone https://github.com/pimoroni/bme680-python
cd bme680-python
./install.sh
```
You will be prompted whether you want to make a new environment - say yes. The Python package will be installed into a Python virtual envrionment called "pimoroni".

Activate the virtual environment with the following command:

```
source ~/.virtualenvs/pimoroni/bin/activate
```

You will need this environment activated in the terminal you are running any scripts in.


### Get Measurements Using Python ###

The file `take_measurement.py` is a Python script that will communicate with the BME688 sensor and get the current measurements for temperature, pressure, humidity and gas resistance.

The script requires no inputs. There is an optional flag `--verbose` you can include which prints out more information (such as calibration information).

Run the script with the below command. Note that the path to the script needs to be correct, either use the full path or the relative path.

```bash
scripts/bme688_measurement.py 
```
